<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Professional fit tracker">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#26814c">
    <title>4 Dice game</title>
    <!-- Tab bar icon -->
    <link rel="shortcut icon" href="./images/logo-400.png" />

    <!-- Web Application Manifest -->
    <link rel="manifest" href="./manifest.json">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="4Dice">
    <meta name="theme-color" content="#26814c">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="green-translucent">
    <meta name="apple-mobile-web-app-title" content="4Dice">

    <!-- Tile icon for Win8 -->
    <meta name="msapplication-TileColor" content="#26814c">
    <meta name="msapplication-navbutton-color" content="#26814c">

    <!-- STYLESHEETS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="./styles/app.css">
    <link rel="stylesheet" href="./styles/dice.css">

    <!--  APP SCRIPTS  -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="./scripts/app.js"></script>

</head>

<body class="bgimg">

    <!--   NAVIGATION     -->
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                <a class="navbar-brand" href=""><img alt="logo" class="navbar-brand-logo" src="./images/logo-400.png"></a>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="#"><i class="fa fa-gamepad"></i> The Game</a></li>
                    <li><a href="#"><i class="fa fa-bar-chart"></i> Charts</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#profile" id="userNavBar"><i class="glyphicon glyphicon-user"></i> </a></li>
                    <li><a href="#" id="signOut"><i class="glyphicon glyphicon-log-out"></i> Log Out</a></li>
                    <li><a href="#" id="signIn"><i class="glyphicon glyphicon-log-in"></i> Sign In</a></li>
                </ul>
            </div>
        </div>
    </div>



    <!--    PAGES     -->
    <div class="container">

        <!--     THE GAME PAGE    -->
        <div class="page" id="game">


            <div class="row">

                <!--     HOW TO PLAY    -->
                <div class="col-md-3">
                    <div class="well transperant">
                        <legend>How to play?</legend>
                        <ul>
                            <li>Choose a number</li>
                            <li>Roll the dices</li>
                            <li>Get the score</li>
                        </ul>

                        <legend>The rules</legend>
                        <p>You can roll 10 times</p>
                        <p>Score valuation:</p>
                        <p>If the guess is lower than or equal to the sum of the first three dice, the score is incremented by the guessed number multiplied by the fourth dice.</p>
                        <p>After each turn your score is add to the total score for the gaming session.</p>
                    </div>
                </div>

                <!--     THE GAME PLAYGRAUND     -->
                <div class="col-md-6">

                    <div class="row">
                        <div class="col-md-12">
                            <h3><span class="pull-left" id="turnsLeft">Games left: 10</span> <span class="pull-right" id="totalScore">Score: 0</span></h1>
                        </div>
                    </div>

                    <br>

                    <div class="row">
                        <div class="col-md-12">
                            <h3 class="text-center"><i class="material-icons">casino</i> PLAYGROUND</h1>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="">
                                <table class="guess-table">
                                    <tbody id="guesTable"></tbody>
                                </table>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="">

                                <div>
                                    <h1 class="display-chosen-num" id="displayChosenNum"><i class="fa fa-question"></i></h1>
                                </div>

                                <div id="dice" class="dice-group">
                                    <span id="animatedDIce" class="dice dice-1" title="Dice 1"></span>
                                    <span class="dice dice-4" title="Dice 2"></span>
                                    <span class="dice dice-3" title="Dice 3"></span>
                                    <span style="margin-left: 10%" class="dice dice-6" title="Dice 4"></span>
                                </div>

                                <br>

                                <div class="btn-group btn-group-justified">
                                    <div class="btn-group" role="group">
                                        <button id="rollDicesBtn" type="submit" disabled class="btn btn-block btn-game"><i class="glyphicon glyphicon-play"></i> ROLL</button>
                                    </div>
                                    <div class="btn-group" role="group">
                                        <button id="stopDicesBtn" type="submit" disabled class="btn btn-block btn-game"><i class="glyphicon glyphicon-stop"></i> STOP</button>
                                    </div>
                                </div>
                                <h4 class="">Auto stop roll after <b>10s!</b></h4>
                                <h3 class="bordered" id="roundScore">Game: 0 | Score: 0</h3>
                            </div>
                        </div>
                    </div>

                </div>

                <!--     THE SCORE     -->
                <div class="col-md-3">
                    <div class="well transperant">
                        <legend><i class="glyphicon glyphicon-star"></i> TOP players</legend>
                        <ul>
                            <li>player 1 - 10000</li>
                            <li>player 2 - 1300</li>
                            <li>player 3 - 1200</li>
                            <li>player 4 - 1100</li>
                        </ul>

                        <legend><i class="glyphicon glyphicon-star"></i> MY Scores</legend>
                        <ul>
                            <li>score 1 - 10000</li>
                            <li>score 2 - 1300</li>
                            <li>score 3 - 1200</li>
                            <li>score 4 - 1100</li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>

        <!--   to do      -->
        <div class="page" id="data">
            <div class="row">
                <div class="col-xs-12">

                </div>
            </div>
        </div>





        <!--     FOOTER     -->
        <hr>
        <footer class="">
            <p class="">&copy; 2017, Atanas Yanev</p>
        </footer>

    </div>
    <!-- /container -->

    <script>
        document.addEventListener('DOMContentLoaded', function() {

            //config params
            var numberOfDices = 4;
            var playTurns = 10;

            var guessTableRowCells = 3; // how manny tds per row
            var minValueGuess = numberOfDices - 1; // guess table min value
            var maxValueGuess = (numberOfDices-1) * 6; // guess table max value
            var game; //game object

            game = new Game(numberOfDices, playTurns);

            // DOM vars
            var guesTable = document.getElementById("guesTable");
            var dice = document.getElementById("dice");
            var displayChosenNum = document.getElementById("displayChosenNum");
            var rollDicesBtn = document.getElementById("rollDicesBtn");
            var stopDicesBtn = document.getElementById("stopDicesBtn");
            var roundScore = document.getElementById("roundScore");
            var totalScore = document.getElementById("totalScore");
            var turnsLeft = document.getElementById("turnsLeft");

            // Generates table with number witch user to chose
            guesTable.innerHTML = createTableWithNumbers(minValueGuess, maxValueGuess, guessTableRowCells);

            // listen for user guess
            guesTable.querySelectorAll("td").forEach(function(item) {
                //if there is play turns
                
                item.addEventListener('click', function() {
                    //alert("item." + item.innerHTML + " | this." + this.innerHTML);
                    // get all tds
                    let tds = guesTable.querySelectorAll("td");
                    // in case some of them have applyed class
                    tds.forEach(tdClass => tdClass.className = '');
                    // display chosen number
                    displayChosenNum.innerHTML = item.innerHTML;
                    // add class to mark the selected number
                    item.className = 'marked-number';
                    // remove disabled from play btn
                    rollDicesBtn.disabled = false;
                });
            });


            // play round btn triggered
            rollDicesBtn.addEventListener('click', function() {
                //lock table
                guesTable.style.pointerEvents = "none";
                stopDicesBtn.disabled = false;
                rollDicesBtn.disabled = true;
                game.guess = Number(displayChosenNum.innerHTML);
                //animate dices
                //set interval func
                //setInterval("startAnimateDice()", 100)
            });

            //stop btn
            stopDicesBtn.addEventListener('click', function() {
                
                game.rollDices();
                game.getPlayerRoundScore();
                game.getPlayerTotalScore();

                //stop animate dice
                //dice.getElementsByTagName("span")
                console.log(game.dices);
                //dispaly numbers for dices
                
                roundScore.innerHTML = "Game: " + (playTurns - game.turnsLeft) + " | Score: " + game.roundScore;
                totalScore.innerHTML = "Score: " + game.totalScore;
                turnsLeft.innerHTML = "Games left: " + game.turnsLeft;

                guesTable.style.pointerEvents = "auto";
                stopDicesBtn.disabled = true;
                rollDicesBtn.disabled = true;
                
            });






        })

    </script>



    <script>
        //fix navbar collapse for hashnav
        $(document).on('click', '.navbar-collapse.in', function(e) {
            if ($(e.target).is('a') && $(e.target).attr('class') != 'dropdown-toggle') {
                $(this).collapse('hide');
            }
        });



        var i = 0;
        var myDice = document.getElementById("animatedDIce");

        function startAnimateDice() {


            var myDices = [
                "dice dice-1",
                "dice dice-4",
                "dice dice-2",
                "dice dice-5",
                "dice dice-3",
                "dice dice-6"
            ];



            //code goes here that will be run every 5 seconds.
            var iCount = myDices.length;
            //var i = 0;
            myDice.className = myDices[i];
            i++;
            if (i == iCount) {
                i = 0;
            }
        }


    </script>
</body>

</html>
